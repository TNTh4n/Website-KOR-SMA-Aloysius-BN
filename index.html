<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olimpiade Sekolah</title>
    <style>
        /* General Styling */
        :root {
            --bg-color: #1a1a2e;
            --card-color: #16213e;
            --font-color: #e0e0e0;
            --header-color: #ffffff;
            --primary-color: #0f3460;
            --secondary-color: #e94560;
            --border-color: #535353;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--font-color);
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }

        h1, h2 {
            color: var(--header-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        /* Navigation */
        nav {
            background-color: var(--card-color);
            padding: 10px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        nav a {
            color: var(--header-color);
            text-decoration: none;
            padding: 10px 15px;
            font-weight: bold;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        nav a:hover {
            background-color: var(--primary-color);
        }

        /* Section Styling */
        .section {
            background-color: var(--card-color);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        /* Table Styling */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: var(--primary-color);
            color: var(--header-color);
        }

        tr:nth-child(even) {
            background-color: #2a2a4a;
        }
        
        tr:hover {
            background-color: var(--primary-color);
        }

        /* Countdown */
        #countdown-container {
            display: flex;
            justify-content: space-around;
            text-align: center;
            flex-wrap: wrap;
        }

        .countdown-item {
            background-color: var(--bg-color);
            padding: 20px;
            border-radius: 8px;
            margin: 10px;
            width: 200px;
        }

        .countdown-item h3 {
            margin: 0 0 10px 0;
            color: var(--secondary-color);
        }

        .countdown-timer {
            font-size: 1.5em;
            font-weight: bold;
        }

        /* Sports Info */
        #sports-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .sport-card {
            background-color: var(--bg-color);
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .sport-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .sport-card-content {
            padding: 15px;
        }

        .sport-card-content h3 {
            margin-top: 0;
            color: var(--secondary-color);
        }

        /* Gallery */
        #gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .gallery-item {
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        .gallery-item figcaption {
            padding: 10px;
            background-color: var(--bg-color);
            font-style: italic;
            font-size: 0.9em;
            text-align: center;
        }

        /* Bracket */
        .bracket-controls, .roster-controls {
            margin-bottom: 20px;
        }

        .bracket-controls label, .roster-controls label {
            font-weight: bold;
            margin-right: 10px;
        }

        select {
            padding: 8px 12px;
            border-radius: 5px;
            background-color: var(--font-color);
            color: var(--bg-color);
            font-size: 1em;
            border: none;
        }

        .bracket-container {
            display: flex;
            overflow-x: auto;
            padding: 20px;
            background-color: var(--bg-color);
            border-radius: 8px;
        }

        .bracket-round {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            min-width: 200px;
            margin-right: 40px;
        }
        
        .bracket-round h3 {
            text-align: center;
            color: var(--secondary-color);
        }

        .bracket-match {
            background-color: var(--card-color);
            border-radius: 5px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            position: relative;
        }

        .bracket-team {
            padding: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .team-name {
            font-weight: normal;
        }
        
        .winner .team-name {
            font-weight: bold;
            color: var(--secondary-color);
        }

        .team-score {
            font-weight: bold;
        }

        .bracket-team:first-child {
            border-bottom: 1px solid var(--border-color);
        }
        
        /* Loading Spinner */
        .loader {
            text-align: center;
            font-size: 1.2em;
            padding: 20px;
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Website Olimpiade Sekolah</h1>

        <nav>
            <a href="#leaderboard">Leaderboard</a>
            <a href="#bracket">Bracket</a>
            <a href="#schedule">Schedule</a>
            <a href="#countdown">Countdown</a>
            <a href="#roster">Daftar Pemain</a> <a href="#sports">Sports</a>
            <a href="#gallery">Gallery</a>
        </nav>

        <div id="leaderboard" class="section">
            <h2>Leaderboard</h2>
            <div id="leaderboard-loader" class="loader">Memuat data...</div>
            <table id="leaderboard-table" style="display:none;">
                <thead>
                    <tr>
                        <th>Team</th>
                        <th>ü•á</th>
                        <th>ü•à</th>
                        <th>ü•â</th>
                        <th>üéñÔ∏è</th>
                        <th>Score</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body">
                    </tbody>
            </table>
        </div>

        <div id="bracket" class="section">
            <h2>Game Bracket</h2>
            <div class="bracket-controls">
                <label for="sport-select">Pilih Olahraga:</label>
                <select id="sport-select">
                    <option value="">Memuat...</option>
                </select>
            </div>
            <div id="bracket-loader" class="loader">Pilih olahraga untuk melihat bracket.</div>
            <div id="bracket-main" class="bracket-container" style="display:none;">
                
                <div class="bracket-round">
                    <h3>Round 1</h3>
                    <div id="match-1" class="bracket-match"></div>
                    <div id="match-2" class="bracket-match"></div>
                    <div id="match-3" class="bracket-match"></div>
                    <div id="match-4" class="bracket-match"></div>
                </div>

                <div class="bracket-round">
                    <h3>Semi-Finals</h3>
                    <div id="match-5" class="bracket-match"></div>
                    <div id="match-6" class="bracket-match"></div>
                </div>

                <div class="bracket-round">
                    <h3>Finals</h3>
                    <div id="match-8" class="bracket-match"></div>
                    <h3 style="margin-top: 40px;">3rd</h3>
                    <div id="match-7" class="bracket-match"></div>
                </div>

                <div class="bracket-round">
                    <h3>Winner</h3>
                    <div id="match-winner" class="bracket-match"></div>
                </div>
            </div>
        </div>

        <div id="schedule" class="section">
            <h2>Schedule</h2>
            <div id="schedule-loader" class="loader">Memuat data...</div>
            
            <h3>Today's Matches</h3>
            <table id="schedule-table-today" style="display:none;">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>Sport</th>
                        <th>Team 1</th>
                        <th>Team 2</th>
                        <th>Venue</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="schedule-body-today">
                    </tbody>
            </table>
            <p id="no-matches-today" style="display:none;">Tidak ada pertandingan hari ini.</p>

            <h3 style="margin-top: 30px;">Upcoming Matches</h3>
            <table id="schedule-table-upcoming" style="display:none;">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Sport</th>
                        <th>Team 1</th>
                        <th>Team 2</th>
                        <th>Venue</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="schedule-body-upcoming">
                    </tbody>
            </table>
            <p id="no-matches-upcoming" style="display:none;">Tidak ada pertandingan yang akan datang.</p>
        </div>

        <div id="countdown" class="section">
            <h2>Countdown</h2>
            <div id="countdown-loader" class="loader">Memuat data...</div>
            <div id="countdown-container">
                </div>
        </div>
        
        <div id="roster" class="section">
            <h2>Daftar Pemain</h2>
            <div class="roster-controls">
                <label for="team-select">Pilih Tim:</label>
                <select id="team-select">
                    <option value="">Memuat...</option>
                </select>
            </div>
            <div id="roster-loader" class="loader">Pilih tim untuk melihat daftar pemain.</div>
            <table id="roster-table" style="display:none;">
                <thead>
                    <tr>
                        <th>Nama Pemain</th>
                        <th>Nomor Punggung</th>
                        <th>Kelas</th>
                    </tr>
                </thead>
                <tbody id="roster-body">
                    </tbody>
            </table>
        </div>

        <div id="sports" class="section">
            <h2>Sports Information</h2>
            <div id="sports-loader" class="loader">Memuat data...</div>
            <div id="sports-container">
                </div>
        </div>

        <div id="gallery" class="section">
            <h2>Gallery</h2>
            <div id="gallery-loader" class="loader">Memuat data...</div>
            <div id="gallery-container">
                </div>
        </div>

    </div>

    <script>
        // --- DATA LOKAL (GANTI DI SINI UNTUK UPDATE) ---
        
        const localData = {
            Teams: [
                { "Team": "X Tim 1", "1st": 1, "2nd": 0, "3rd": 1, "4th": 0 },
                { "Team": "X Tim 2", "1st": 0, "2nd": 2, "3rd": 0, "4th": 0 },
                { "Team": "XI Tim 1", "1st": 0, "2nd": 0, "3rd": 1, "4th": 1 },
                { "Team": "XI Tim 2", "1st": 2, "2nd": 1, "3rd": 0, "4th": 0 },
                { "Team": "XI Tim 3", "1st": 0, "2nd": 0, "3rd": 0, "4th": 1 },
                { "Team": "XII Tim 1", "1st": 1, "2nd": 0, "3rd": 0, "4th": 0 },
                { "Team": "XII Tim 2", "1st": 0, "2nd": 0, "3rd": 1, "4th": 0 },
                { "Team": "XII Tim 3", "1st": 0, "2nd": 1, "3rd": 0, "4th": 0 }
            ],
            
            Brackets: [
                { "Sport": "Sepak Bola", "Round": 1, "Match Number": 1, "Team 1": "X Tim 1", "Team 2": "XI Tim 3", "Winner": "X Tim 1", "Score 1": 2, "Score 2": 1 },
                { "Sport": "Sepak Bola", "Round": 1, "Match Number": 2, "Team 1": "XII Tim 2", "Team 2": "XI Tim 2", "Winner": "XI Tim 2", "Score 1": 0, "Score 2": 3 },
                { "Sport": "Sepak Bola", "Round": 2, "Match Number": 5, "Team 1": "X Tim 1", "Team 2": "XI Tim 2", "Winner": "X Tim 1", "Score 1": 1, "Score 2": 0 },
                { "Sport": "Voli putra", "Round": 1, "Match Number": 1, "Team 1": "XII Tim 1", "Team 2": "XI Tim 3", "Winner": "XII Tim 1", "Score 1": 2, "Score 2": 0 },
            ],
            
            Schedule: [
                { "Date": "2025-10-25", "Time": "14:00:00", "Sport": "Basket putra", "Team 1": "X Tim 1", "Team 2": "XI Tim 2", "Venue": "GOR Utama", "Status": "finished" }, // Ganti status untuk hari ini
                { "Date": "2025-10-25", "Time": "16:30:00", "Sport": "Voli putri", "Team 1": "X Tim 2", "Team 2": "XII Tim 3", "Venue": "Lapangan Voli A", "Status": "live" }, // Ganti status untuk hari ini
                { "Date": "2025-10-26", "Time": "09:00:00", "Sport": "Sepak Bola", "Team 1": "XI Tim 1", "Team 2": "XII Tim 1", "Venue": "Stadion", "Status": "upcoming" }
            ],
            
            Countdown: [
                { "Event Name": "Upacara Pembukaan", "Target Date": "2025-10-28 08:00:00" },
                { "Event Name": "Pengumuman Pemenang", "Target Date": "2025-11-16 17:00:00" }
            ],
            
            Sports: [
                { "Sport Name": "Basket putra", "Image URL": "https://via.placeholder.com/300x200?text=Basket+Putra", "Description": "Pertandingan 5 lawan 5...", "Rules": "Peraturan FIBA dimodifikasi.", "Number of Teams": 8, "Duration": "4x10 menit", "Winning Conditions": "Skor tertinggi." },
                { "Sport Name": "Basket putri", "Image URL": "https://via.placeholder.com/300x200?text=Basket+Putri", "Description": "Pertandingan 5 lawan 5...", "Rules": "Peraturan FIBA dimodifikasi.", "Number of Teams": 6, "Duration": "4x8 menit", "Winning Conditions": "Skor tertinggi." },
                { "Sport Name": "Voli putra", "Image URL": "https://via.placeholder.com/300x200?text=Voli+Putra", "Description": "Pertandingan bola voli standar.", "Rules": "3 set terbaik.", "Number of Teams": 8, "Duration": "Variabel", "Winning Conditions": "Mencapai 25 poin, selisih 2." },
                { "Sport Name": "Voli putri", "Image URL": "https://via.placeholder.com/300x200?text=Voli+Putri", "Description": "Pertandingan bola voli standar.", "Rules": "3 set terbaik.", "Number of Teams": 6, "Duration": "Variabel", "Winning Conditions": "Mencapai 25 poin, selisih 2." },
                { "Sport Name": "Polo air", "Image URL": "https://via.placeholder.com/300x200?text=Polo+Air", "Description": "Bermain di kolam renang.", "Rules": "Aturan dasar polo air.", "Number of Teams": 4, "Duration": "4x7 menit", "Winning Conditions": "Skor tertinggi." },
                { "Sport Name": "Kasti", "Image URL": "https://via.placeholder.com/300x200?text=Kasti", "Description": "Permainan bola tradisional.", "Rules": "Aturan sekolah.", "Number of Teams": 8, "Duration": "2 babak", "Winning Conditions": "Jumlah run terbanyak." },
                { "Sport Name": "Sepak Bola", "Image URL": "https://via.placeholder.com/300x200?text=Sepak+Bola", "Description": "Turnamen antar kelas.", "Rules": "Peraturan FIFA dimodifikasi (7 lawan 7).", "Number of Teams": 8, "Duration": "2x30 menit", "Winning Conditions": "Skor tertinggi." }
            ],

            Gallery: [
                { "Image URL": "https://via.placeholder.com/250x200?text=Foto+Pembukaan", "Caption": "Upacara Pembukaan Meriah", "Date": "2025-11-10" },
                { "Image URL": "https://via.placeholder.com/250x200?text=Aksi+Basket", "Caption": "Aksi Lincah di Lapangan Basket", "Date": "2025-11-12" },
                { "Image URL": "https://via.placeholder.com/250x200?text=Juara+Voli", "Caption": "Tim Voli Putri Raih Gelar", "Date": "2025-11-15" }
            ],
            
            // --- DATA BARU: DAFTAR PEMAIN ---
            Rosters: [
                { "Team": "X Tim 1", "Player Name": "Budi Santoso", "Number": 10, "Class": "X-A"},
                { "Team": "X Tim 1", "Player Name": "Ani Wijaya", "Number": 7, "Class": "X-B"},
                { "Team": "X Tim 1", "Player Name": "Joko Susilo", "Number": 1, "Class": "X-C"},
                
                { "Team": "XI Tim 2", "Player Name": "Citra Dewi", "Number": 5, "Class": "XI-IPA 1"},
                { "Team": "XI Tim 2", "Player Name": "Faisal Reza", "Number": 12, "Class": "XI-IPS 3"},
                
                { "Team": "XII Tim 1", "Player Name": "Rima Adelia", "Number": 8, "Class": "XII-Bahasa"},
                { "Team": "XII Tim 1", "Player Name": "Gilang Pratama", "Number": 4, "Class": "XII-IPA 2"}
            ]
        };

        // --- FUNGSI UTAMA (Diadaptasi untuk menggunakan data lokal) ---

        async function getLocalData(sheetName) {
            await new Promise(resolve => setTimeout(resolve, 50));
            return localData[sheetName] || [];
        }

        // --- 1. LEADERBOARD ---
        async function loadLeaderboard() {
            const loader = document.getElementById('leaderboard-loader');
            const table = document.getElementById('leaderboard-table');
            const tbody = document.getElementById('leaderboard-body');
            
            const data = await getLocalData('Teams');
            
            if (data.length > 0) {
                const sortedData = data.map(row => {
                    const p1 = parseInt(row['1st'] || 0);
                    const p2 = parseInt(row['2nd'] || 0);
                    const p3 = parseInt(row['3rd'] || 0);
                    const p4 = parseInt(row['4th'] || 0);
                    const totalPoints = (p1 * 8) + (p2 * 6) + (p3 * 4) + (p4 * 2);
                    return { ...row, totalPoints, p1, p2, p3, p4 };
                }).sort((a, b) => b.totalPoints - a.totalPoints);

                tbody.innerHTML = ''; 
                sortedData.forEach(row => {
                    const tr = `
                        <tr>
                            <td>${row['Team']}</td>
                            <td>${row.p1}</td>
                            <td>${row.p2}</td>
                            <td>${row.p3}</td>
                            <td>${row.p4}</td>
                            <td>${row.totalPoints}</td>
                        </tr>
                    `;
                    tbody.innerHTML += tr;
                });
                
                loader.style.display = 'none';
                table.style.display = 'table';
            } else {
                loader.innerText = 'Tidak ada data Leaderboard.';
            }
        }

        // --- 2. BRACKET (Fungsi tidak berubah) ---
        let allSportsData = [];
        let allBracketsData = [];

        async function loadBracketData() {
            const sportSelect = document.getElementById('sport-select');
            
            allSportsData = await getLocalData('Sports');
            
            if (allSportsData.length > 0) {
                sportSelect.innerHTML = '<option value="">-- Pilih Olahraga --</option>';
                allSportsData.forEach(sport => {
                    sportSelect.innerHTML += `<option value="${sport['Sport Name']}">${sport['Sport Name']}</option>`;
                });
            } else {
                sportSelect.innerHTML = '<option value="">Tidak ada data olahraga</option>';
            }

            allBracketsData = await getLocalData('Brackets');
            
            sportSelect.addEventListener('change', (e) => {
                renderBracket(e.target.value);
            });
        }
        
        function renderBracket(sportName) {
            const bracketMain = document.getElementById('bracket-main');
            const loader = document.getElementById('bracket-loader');

            if (!sportName) {
                bracketMain.style.display = 'none';
                loader.style.display = 'block';
                loader.innerText = 'Pilih olahraga untuk melihat bracket.';
                return;
            }

            const sportBrackets = allBracketsData.filter(match => match['Sport'] === sportName);
            
            if (sportBrackets.length === 0) {
                bracketMain.style.display = 'none';
                loader.style.display = 'block';
                loader.innerText = `Belum ada data bracket untuk ${sportName}.`;
                return;
            }

            loader.style.display = 'none';
            bracketMain.style.display = 'flex';
            
            // Kosongkan semua match
            for(let i=1; i<=8; i++) {
                const matchEl = document.getElementById(`match-${i}`);
                if (matchEl) matchEl.innerHTML = '';
            }
            const matchWinnerEl = document.getElementById('match-winner');
            if (matchWinnerEl) matchWinnerEl.innerHTML = '';

            const matchMap = {};
            sportBrackets.forEach(match => {
                matchMap[match['Match Number']] = match;
            });
            
            const createTeamHTML = (team, score, isWinner) => {
                if (!team) return '<div class="bracket-team">&nbsp;</div>';
                const winnerClass = isWinner ? 'winner' : '';
                return `
                    <div class="bracket-team ${winnerClass}">
                        <span class="team-name">${team}</span>
                        <span class="team-score">${score !== null ? score : ''}</span>
                    </div>
                `;
            };
            
            const fillMatch = (matchId, matchData) => {
                const matchEl = document.getElementById(`match-${matchId}`);
                if (!matchEl) return;

                if (!matchData) {
                    matchEl.innerHTML = createTeamHTML(null) + createTeamHTML(null);
                    return;
                }
                
                const winner = matchData['Winner'];
                const team1 = matchData['Team 1'];
                const team2 = matchData['Team 2'];
                const score1 = matchData['Score 1'];
                const score2 = matchData['Score 2'];

                matchEl.innerHTML = `
                    ${createTeamHTML(team1, score1, winner === team1)}
                    ${createTeamHTML(team2, score2, winner === team2)}
                `;
            };

            fillMatch(1, matchMap[1]);
            fillMatch(2, matchMap[2]);
            fillMatch(3, matchMap[3]);
            fillMatch(4, matchMap[4]);
            fillMatch(5, matchMap[5]); 
            fillMatch(6, matchMap[6]); 
            fillMatch(7, matchMap[7]); 
            fillMatch(8, matchMap[8]); 
            
            const finalMatch = matchMap[8];
            if (finalMatch && finalMatch['Winner']) {
                document.getElementById('match-winner').innerHTML = createTeamHTML(finalMatch['Winner'], null, true);
            } else {
                document.getElementById('match-winner').innerHTML = createTeamHTML(null);
            }
        }


        // --- 3. SCHEDULE (Fungsi tidak berubah, hanya data yang diubah) ---
        async function loadSchedule() {
            const loader = document.getElementById('schedule-loader');
            const todayTbody = document.getElementById('schedule-body-today');
            const upcomingTbody = document.getElementById('schedule-body-upcoming');
            const todayTable = document.getElementById('schedule-table-today');
            const upcomingTable = document.getElementById('schedule-table-upcoming');
            const noToday = document.getElementById('no-matches-today');
            const noUpcoming = document.getElementById('no-matches-upcoming');

            const data = await getLocalData('Schedule');
            
            if (data.length === 0) {
                loader.innerText = 'Tidak ada data Schedule.';
                return;
            }
            
            const today = new Date().toDateString();
            const now = new Date();
            
            let todayMatches = [];
            let upcomingMatches = [];

            data.forEach(row => {
                const matchDateStr = row['Date']; 
                const matchTimeStr = row['Time']; 
                
                if (!matchDateStr || !matchTimeStr) return;
                
                const matchDateTime = new Date(`${matchDateStr}T${matchTimeStr}`);

                if (isNaN(matchDateTime)) return; 

                const displayDate = matchDateTime.toLocaleDateString('id-ID', { day: '2-digit', month: 'short', year: 'numeric' });
                const displayTime = matchDateTime.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit' });

                const trUpcoming = `
                    <tr>
                        <td>${displayDate}</td>
                        <td>${displayTime}</td>
                        <td>${row['Sport']}</td>
                        <td>${row['Team 1']}</td>
                        <td>${row['Team 2']}</td>
                        <td>${row['Venue']}</td>
                        <td>${row['Status']}</td>
                    </tr>
                `;
                
                const trToday = `
                    <tr>
                        <td>${displayTime}</td>
                        <td>${row['Sport']}</td>
                        <td>${row['Team 1']}</td>
                        <td>${row['Team 2']}</td>
                        <td>${row['Venue']}</td>
                        <td>${row['Status']}</td>
                    </tr>
                `;

                if (matchDateTime.toDateString() === today) {
                    todayMatches.push(trToday);
                } else if (matchDateTime >= now) {
                    upcomingMatches.push(trUpcoming);
                }
            });

            loader.style.display = 'none';

            if (todayMatches.length > 0) {
                todayTbody.innerHTML = todayMatches.join('');
                todayTable.style.display = 'table';
                noToday.style.display = 'none';
            } else {
                todayTable.style.display = 'none';
                noToday.style.display = 'block';
            }
            
            if (upcomingMatches.length > 0) {
                upcomingTbody.innerHTML = upcomingMatches.join('');
                upcomingTable.style.display = 'table';
                noUpcoming.style.display = 'none';
            } else {
                upcomingTable.style.display = 'none';
                noUpcoming.style.display = 'block';
            }
        }

        // --- 4. COUNTDOWN (Fungsi tidak berubah, hanya data yang diubah) ---
        let countdownIntervals = [];
        async function loadCountdown() {
            const loader = document.getElementById('countdown-loader');
            const container = document.getElementById('countdown-container');
            
            const data = await getLocalData('Countdown');
            
            if (data.length === 0) {
                loader.innerText = 'Tidak ada data Countdown.';
                return;
            }

            loader.style.display = 'none';
            container.innerHTML = '';
            countdownIntervals.forEach(clearInterval); 
            countdownIntervals = [];

            data.forEach(row => {
                const eventName = row['Event Name'];
                const targetDateStr = row['Target Date']; 
                
                if (!targetDateStr) return;
                
                const targetDate = new Date(targetDateStr.replace(' ', 'T'));

                if (isNaN(targetDate)) return;

                const item = document.createElement('div');
                item.className = 'countdown-item';
                item.innerHTML = `
                    <h3>${eventName}</h3>
                    <div class="countdown-timer" id="timer-${eventName.replace(/\s+/g, '-')}">
                        --:--:--:--
                    </div>
                `;
                container.appendChild(item);
                
                const timerEl = document.getElementById(`timer-${eventName.replace(/\s+/g, '-')}`);

                const interval = setInterval(() => {
                    const now = new Date().getTime();
                    const distance = targetDate - now;

                    if (distance < 0) {
                        timerEl.innerHTML = "EVENT SELESAI / SEDANG BERLANGSUNG";
                        clearInterval(interval);
                        return;
                    }

                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    timerEl.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
                }, 1000);
                countdownIntervals.push(interval);
            });
        }
        
        // --- 5. DAFTAR PEMAIN (ROSTER) ---
        async function loadRoster() {
            const teamSelect = document.getElementById('team-select');
            const teamLoader = document.getElementById('roster-loader');
            
            // 1. Ambil data tim untuk dropdown
            const teams = await getLocalData('Teams');
            
            if (teams.length > 0) {
                teamSelect.innerHTML = '<option value="">-- Pilih Tim --</option>';
                teams.forEach(team => {
                    const teamName = team['Team'];
                    teamSelect.innerHTML += `<option value="${teamName}">${teamName}</option>`;
                });
            } else {
                teamSelect.innerHTML = '<option value="">Tidak ada data tim</option>';
            }
            
            // 2. Event listener untuk menampilkan pemain
            teamSelect.addEventListener('change', (e) => {
                renderRoster(e.target.value);
            });
            
            teamLoader.innerText = 'Pilih tim untuk melihat daftar pemain.';
        }

        async function renderRoster(teamName) {
            const rosterBody = document.getElementById('roster-body');
            const rosterTable = document.getElementById('roster-table');
            const teamLoader = document.getElementById('roster-loader');
            
            if (!teamName) {
                rosterTable.style.display = 'none';
                teamLoader.style.display = 'block';
                teamLoader.innerText = 'Pilih tim untuk melihat daftar pemain.';
                return;
            }
            
            const allRosters = await getLocalData('Rosters');
            const teamRoster = allRosters.filter(player => player['Team'] === teamName);
            
            rosterBody.innerHTML = ''; 
            
            if (teamRoster.length > 0) {
                teamRoster.forEach(player => {
                    const tr = `
                        <tr>
                            <td>${player['Player Name']}</td>
                            <td>${player['Number'] || '-'}</td>
                            <td>${player['Class'] || '-'}</td>
                        </tr>
                    `;
                    rosterBody.innerHTML += tr;
                });
                
                rosterTable.style.display = 'table';
                teamLoader.style.display = 'none';
            } else {
                rosterTable.style.display = 'none';
                teamLoader.style.display = 'block';
                teamLoader.innerText = `Tidak ada daftar pemain terdaftar untuk ${teamName}.`;
            }
        }

        // --- 6. SPORTS INFO (Fungsi tidak berubah) ---
        async function loadSportsInfo() {
            const loader = document.getElementById('sports-loader');
            const container = document.getElementById('sports-container');
            
            const data = await getLocalData('Sports');

            if (data.length > 0) {
                loader.style.display = 'none';
                container.innerHTML = '';
                data.forEach(sport => {
                    const card = `
                        <div class="sport-card">
                            <img src="${sport['Image URL'] || 'https://via.placeholder.com/300x200?text=Sport'}" alt="${sport['Sport Name']}">
                            <div class="sport-card-content">
                                <h3>${sport['Sport Name']}</h3>
                                <p><strong>Deskripsi:</strong> ${sport['Description'] || '-'}</p>
                                <p><strong>Aturan:</strong> ${sport['Rules'] || '-'}</p>
                                <p><strong>Tim:</strong> ${sport['Number of Teams'] || '-'} | <strong>Durasi:</strong> ${sport['Duration'] || '-'}</p>
                                <p><strong>Kondisi Menang:</strong> ${sport['Winning Conditions'] || '-'}</p>
                            </div>
                        </div>
                    `;
                    container.innerHTML += card;
                });
            } else {
                loader.innerText = 'Tidak ada data Sports.';
            }
        }

        // --- 7. GALLERY (Fungsi tidak berubah) ---
        async function loadGallery() {
            const loader = document.getElementById('gallery-loader');
            const container = document.getElementById('gallery-container');
            
            const data = await getLocalData('Gallery');
            
            if (data.length > 0) {
                loader.style.display = 'none';
                container.innerHTML = '';
                data.forEach(item => {
                    const date = item['Date'] ? new Date(item['Date']).toLocaleDateString('id-ID') : '';
                    const galleryItem = `
                        <figure class="gallery-item">
                            <img src="${item['Image URL'] || 'https://via.placeholder.com/250x200?text=Image'}" alt="${item['Caption']}">
                            <figcaption>
                                ${item['Caption'] || ''}
                                <small style="display:block; margin-top: 5px;">${date}</small>
                            </figcaption>
                        </figure>
                    `;
                    container.innerHTML += galleryItem;
                });
            } else {
                loader.innerText = 'Tidak ada data Gallery.';
            }
        }

        // --- Inisialisasi Website ---
        document.addEventListener('DOMContentLoaded', () => {
            loadLeaderboard();
            loadBracketData();
            loadSchedule();
            loadCountdown();
            loadRoster(); // Panggil fungsi baru
            loadSportsInfo();
            loadGallery();
            
            // Smooth scroll untuk navigasi
            document.querySelectorAll('nav a').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>

</html>




